<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<<<<<<< HEAD

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forgot Password </title>
    <link rel="stylesheet" href="https://unpkg.com/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://unpkg.com/bs-brain@2.0.3/components/password-resets/password-reset-4/assets/css/password-reset-4.css">
    <style>

 

        /* Add any additional custom styles here */
        /* Style for OTP, New Password, Confirm Password inputs */
        input[type="text"],
        input[type="password"] {
            width: 100%;
            padding: 0.375rem 0.75rem;
            font-size: 1rem;
            line-height: 1.5;
            color: #495057;
            background-color: #fff;
            background-clip: padding-box;
            border: 1px solid #ced4da;
            border-radius: 10px;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
            margin-bottom: 20px;
        }

      /* Style for Reset Password and Send OTP buttons */
        .bsb-btn-xl {
            width: 100%;
            padding: 0.75rem;
            font-size: 1rem;
            line-height: 1.5;
            border-radius: 20px;
            background-color: #007bff;
            color: #fff;
            border: 1px solid #007bff;
            cursor: pointer;
            margin-top: 10px; /* Add some top margin */
            margin-bottom: 20px;
        }

        .bsb-btn-xl:hover {
            background-color: #0056b3;
            border-color: #0056b3;
        }


       

    </style>
</head>

<body>

   <!-- Password Reset 4 - Bootstrap Brain Component -->
     <section class="p-3 p-md-4 p-xl-5">
        <div class="container">
            <div class="card border-light-subtle shadow-sm">
                <div class="row g-0">
                    <div class="col-12 col-md-6">
                        <img class="img-fluid rounded-start w-100 h-100 object-fit-cover" loading="lazy" src="https://www.allaboutmom.com/wp-content/uploads/2019/11/bloodtest-735x865.jpg" alt="BootstrapBrain Logo">
                    </div>
                    <div class="col-12 col-md-6">
                        <div class="card-body p-3 p-md-4 p-xl-5">
                            <div class="mb-5">
                                <h2 class="h3">Forgot Password</h2>
                                <h3 class="fs-6 fw-normal text-secondary m-0">Provide the email address associated with your account to change your password.</h3>
                            </div>

                            <form id="resetPassword" th:action="@{/resetPassword}" th:object="${detail}" method="post">
		 <p th:if="${message}" th:text="${message}"></p>

                                <div class="row gy-3 gy-md-4 overflow-hidden">
                                    <div class="col-12">
                                        <label for="email" class="form-label">Email <span class="text-danger">*</span></label>
                                        <input type="email" class="form-control" name="email" id="email" placeholder="name@example.com" required>
                                    </div>
                                    <div class="col-12">
                                        <div class="d-grid">
                                            <button class="btn bsb-btn-xl btn-primary" type="button" onclick="sendOTP()">Send OTP</button>
                                        </div>
                                        <div>
                                            <!-- OTP input -->
                                            <label for="otp" class="form-label" id="otpLabel" style="display: none;">Enter OTP:<span class="text-danger">*</span></label>
                                            <input type="text" class="form-control" id="otp" name="otp" style="display: none;"  required >
                                        </div>
                                        <div>
                                            <!-- New password input -->
                                            <label for="newPassword" class="form-label" id="passwordLabel" style="display: none;">New Password:<span class="text-danger">*</span></label>
                                            <input type="password" class="form-control"  id="password" name="password"  style="display: none;" required >
                                        </div>
                                        <div>
                                            <!-- Confirm password input -->
                                            <label for="confirmPassword" class="form-label" id="confirmPasswordLabel" style="display: none;">Confirm Password:<span class="text-danger">*</span></label>
                                            <input type="password" class="form-control"  id="confirmPassword" name="confirmPassword" style="display: none;" oninput="validatePasswords()">
                                        </div>
                                        <div>
                                             <!-- Display error message if passwords do not match -->
                                            <p id="passwordError"></p>
                                        </div>
                                        <div>
                                            <div class="col-12">
                                               <div class="d-grid">
                                                  <button class="btn bsb-btn-xl btn-primary" type="submit" id="submitBtn" style="display: none;" >Reset Password</button>
                                        </div>
                                       </div>
                                        <div>
                                    </div>
                                </div>
                            </form>

                            <hr class="mt-5 mb-4 border-secondary-subtle">

                            <div class="d-flex gap-2 gap-md-4 flex-column flex-md-row justify-content-md-end">
                                 <a  th:href="@{/userLogin}" class="link-secondary text-decoration-none" >Login</a>                              
                            </div>                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

  <script>
        function sendOTP() {
            var email = document.getElementById('email').value;
 
            // Assuming you have an endpoint '/sendOTP/{email}' on the server to handle OTP requests
            fetch('/sendOTP/' + email, { method: 'POST' })
                .then(response => {
                    // Handle the response as needed
                    console.log('OTP Sent Successfully');
                })
                .catch(error => console.error('Error sending OTP:', error));
 
            // Show the OTP input and hide the email input and send OTP button
            document.getElementById('otpLabel').style.display = 'block';
            document.getElementById('otp').style.display = 'block';
            document.getElementById('passwordLabel').style.display = 'block';
            document.getElementById('password').style.display = 'block';
            document.getElementById('confirmPasswordLabel').style.display = 'block';
            document.getElementById('confirmPassword').style.display = 'block';
            // Show the submit button
            document.getElementById('submitBtn').style.display = 'block';
        }
 
        function validatePasswords() {
            var newPassword = document.getElementById('password').value;
            var confirmPassword = document.getElementById('confirmPassword').value;
            var errorLabel = document.getElementById('passwordError');
 
            // Check if passwords match
            if (newPassword !== confirmPassword) {
                errorLabel.textContent = 'Passwords do not match';
            } else {
                errorLabel.textContent = '';
            }
        }

    </script>

</body>

</html>
